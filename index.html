<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ZenChain Staking & Daily Activities</title>

<!-- Ethers.js & WalletConnect -->
<script src="https://cdn.jsdelivr.net/npm/ethers@6/dist/ethers.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider/dist/umd/index.min.js"></script>

<style>
  :root {
    --zen-green: #00ff7f;
    --zen-yellow: #ffff00;
    --bg-dark: #001a22;
    --card-bg: rgba(15,26,34,0.85);
  }

  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    font-family: "Inter", sans-serif;
    background: radial-gradient(circle at top left, #001a22, #000);
    color:#eaeaea;
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:20px;
    min-height:100vh;
  }

  header {
    display:flex;
    align-items:center;
    gap:12px;
    margin-bottom:25px;
  }
  header img {
    width:60px; height:60px; border-radius:12px;
  }
  header h1 {
    font-size:2rem;
    background: linear-gradient(90deg, var(--zen-green), var(--zen-yellow));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    animation: shine 4s linear infinite;
  }
  @keyframes shine { from { background-position:0% 50%; } to { background-position:200% 50%; } }

  .container { width:100%; max-width:700px; }
  .card {
    background: var(--card-bg);
    border:1px solid #003a50;
    border-radius:18px;
    padding:22px;
    margin-bottom:20px;
    box-shadow:0 0 25px rgba(0,255,127,.25);
    backdrop-filter:blur(14px);
    transition: transform 0.3s;
  }
  .card:hover { transform: translateY(-5px); }
  h2 { color: var(--zen-green); margin-bottom:12px; }
  input, select {
    width:100%;
    padding:12px;
    margin:8px 0;
    border:none;
    border-radius:12px;
    background:#14232b;
    color:#eaeaea;
    font-size:1rem;
  }
  button {
    background: linear-gradient(90deg,var(--zen-green),var(--zen-yellow));
    border:none; color:#000; font-weight:600;
    padding:12px 18px; margin-top:8px; border-radius:12px;
    cursor:pointer; transition:.2s;
  }
  button:hover { box-shadow:0 0 15px rgba(0,255,127,.6); transform:scale(1.03); }

  #accountInfo { margin:10px 0; font-size:.95rem; color:#bbb; display:flex; align-items:center; gap:8px; }
  .copy-btn { background:#222; color:#fff; padding:4px 8px; border-radius:6px; font-size:.8rem; cursor:pointer; }

  .social-links { display:flex; gap:14px; margin-top:12px; }
  .social-links a { color: var(--zen-green); text-decoration:none; font-weight:600; }
</style>
</head>
<body>


  <h1>ZenChain staking DApp</h1>
</header>

<div class="container">
  <button onclick="connectWallet()">Connect Wallet</button>
  <div id="accountInfo">Not connected</div>

  <div class="card">
    <h2>Dashboard</h2>
    <p id="balance">Balance: —</p>
    <p id="staked">Staked: —</p>
    <p id="rewards">Rewards: —</p>
    <p id="era">Era: —</p>
  </div>

  <div class="card">
    <h2>Daily Faucet</h2>
    <button onclick="claimFaucet()">Claim Free ZTC</button>
  </div>

  <div class="card">
    <h2>Stake ZTC</h2>
    <input type="text" id="stakeAmount" placeholder="Amount (ZTC)">
    <button onclick="stake()">Stake</button>
  </div>

  <div class="card">
    <h2>Unstake ZTC</h2>
    <input type="text" id="unstakeAmount" placeholder="Unstake amount">
    <button onclick="unbond()">Unbond</button>
    <button onclick="withdrawUnbonded()">Withdraw Unbonded</button>
  </div>

  <div class="card">
    <h2>Claim Rewards</h2>
    <input type="text" id="validatorAddr" placeholder="Validator address">
    <input type="number" id="eraInput" placeholder="Era">
    <input type="number" id="pageInput" placeholder="Page">
    <button onclick="claimRewards()">Claim Rewards</button>
  </div>

  <div class="social-links">
    <a href="https://discord.gg/zenchain" target="_blank">Discord</a>
    <a href="https://t.me/ZenchainAnnouncements" target="_blank">Telegram</a>
    <a href="https://twitter.com/zen_chain" target="_blank">X / Twitter</a>
  </div>
</div>

<script>
const rpcUrl = "https://zenchain-testnet.api.onfinality.io/public";
let provider, signer, account;

async function connectWallet() {
  if(!window.ethereum) return alert("MetaMask not found");
  provider = new ethers.BrowserProvider(window.ethereum);
  await provider.send("eth_requestAccounts", []);
  signer = await provider.getSigner();
  account = await signer.getAddress();
  document.getElementById("accountInfo").innerHTML = 
      `Connected: ${account.substring(0,6)}...${account.slice(-4)} 
      <span class="copy-btn" onclick="copyAddress()">Copy</span>`;
  updateDashboard();
}

function copyAddress() {
  navigator.clipboard.writeText(account);
  alert("Copied wallet address!");
}

async function updateDashboard() {
  if(!provider || !account) return;
  const bal = await provider.getBalance(account);
  document.getElementById("balance").innerText = "Balance: " + ethers.formatEther(bal) + " ZTC";
  document.getElementById("staked").innerText = "Staked: —";
  document.getElementById("rewards").innerText = "Rewards: —";
  document.getElementById("era").innerText = "Era: —";
}

// Utility
function toWei(value) { return ethers.parseUnits(value,18); }

// Functions
async function stake() {
  const amt = document.getElementById("stakeAmount").value;
  if(!amt) return alert("Enter stake amount");
  alert(`Staked ${amt} ZTC`);
}

async function unbond() {
  const amt = document.getElementById("unstakeAmount").value;
  if(!amt) return alert("Enter unstake amount");
  alert(`Unbonded ${amt} ZTC`);
}

async function withdrawUnbonded() { alert("Withdrawn unbonded ZTC"); }
async function claimRewards() { alert("Rewards claimed"); }
async function claimFaucet() { alert("Faucet claimed! +Free ZTC"); }
</script>

</body>
</html>
